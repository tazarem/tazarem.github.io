{
    "version": "https://jsonfeed.org/version/1",
    "title": "Coding Coconut • All posts by \"문제해결\" tag",
    "description": "주니어 웹 프론트엔드/백엔드 개발자. \\n  공부하는 것도, 노는 것도 그만큼 좋아합니다. \\n 현 직장에서는 AWS Lambda 와 Typscript 를 접목한 서드파티 모듈 개발을 하고 있습니다.",
    "home_page_url": "https://coding-coconut.com",
    "items": [
        {
            "id": "https://coding-coconut.com/post/clv4m958b00016m5o06sj0ojx/",
            "url": "https://coding-coconut.com/post/clv4m958b00016m5o06sj0ojx/",
            "title": "Docker 또는 Podman Container에서의 Selenium 웹 크롤링 Timed out 오류",
            "date_published": "2024-04-12T08:16:08.000Z",
            "content_html": "<p>이전에 selenium 프로젝트를 했다고 안일했었는지 크롤링 프로젝트를 만들고 배포하자마자 오류가 났다.</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Timed out receiving message from renderer: 600.000</span><br></pre></td></tr></table></figure>\n<p>원인이 뭔지 도통 모르겠어서 이것저것 찾아봤는데 결국 해결하긴 했음.</p>\n<h3 id=\"오류-고치는-과정\"><a href=\"#오류-고치는-과정\" class=\"headerlink\" title=\"오류 고치는 과정\"></a>오류 고치는 과정</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Ubuntu 20.04 LTS</span></span><br><span class=\"line\"><span class=\"comment\">// Podman Container Build</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 프로젝트 이미지 생성용 Dockerfile</span></span><br><span class=\"line\">FROM selenium/node-chrome:<span class=\"number\">123.0</span><span class=\"number\">.6312</span><span class=\"number\">.86</span>-chromedriver-<span class=\"number\">123.0</span><span class=\"number\">.6312</span><span class=\"number\">.86</span>-<span class=\"number\">20240402</span></span><br><span class=\"line\">(이후 Node.js 설치 과정)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 프로젝트 가동 후 셀레늄이 크롬을 띄우는 타이밍에서 타임아웃 메시지 확인</span></span><br><span class=\"line\">Timed out receiving message <span class=\"keyword\">from</span> renderer: <span class=\"number\">600.000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 혹여 버전이 서로 안맞나 싶어서 컨테이너 내부 sh명령어로 버전 확인</span></span><br><span class=\"line\">podman exec -it [프로젝트명] sh</span><br><span class=\"line\"></span><br><span class=\"line\">google-chrome --version</span><br><span class=\"line\">&gt; Google Chrome <span class=\"number\">123.0</span><span class=\"number\">.6312</span><span class=\"number\">.86</span> </span><br><span class=\"line\"></span><br><span class=\"line\">chromedriver --version</span><br><span class=\"line\">&gt; ChromeDriver <span class=\"number\">123.0</span><span class=\"number\">.6312</span><span class=\"number\">.86</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 버전도 맞고 컨테이너 내부에 구글 크롬이 안 깔린것도 아님을 확인</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 구글에 에러 검색/스택오버플로우 탐색. 아래 포스트는 오류 해결에 결정적이었다.</span></span><br><span class=\"line\"><span class=\"string\">&quot;https://stackoverflow.com/questions/48450594/selenium-timed-out-receiving-message-from-renderer?rq=2&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 프로젝트에서 셀레늄이 크롬창을 띄우는 옵션 확인 (ts 기준)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> driver: WebDriver</span><br><span class=\"line\"><span class=\"keyword\">const</span> cOption = <span class=\"keyword\">new</span> chrome.Options()</span><br><span class=\"line\">cOption.addArguments(<span class=\"string\">&quot;--no-sandbox&quot;</span>)</span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--headless&quot;</span>) <span class=\"comment\">// 인터넷창 안띄우는 옵션 추가</span></span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--enable-automation&quot;</span>) <span class=\"comment\">//오토메이션 켜기</span></span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--disable-infobars&quot;</span>) <span class=\"comment\">//비활성화 옵션 추가</span></span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--start-maximized&quot;</span>) <span class=\"comment\">// 창을 최대로 키우기</span></span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--disable-dev-shm-usage&quot;</span>)</span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--single-process&quot;</span>)</span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--incognito&quot;</span>) <span class=\"comment\">//시크릿 모드</span></span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--log-level=off&quot;</span>)</span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--disk-cache-size=zero&quot;</span>)</span><br><span class=\"line\">.addArguments(<span class=\"string\">&quot;--disable-gpu&quot;</span>) <span class=\"comment\">// 이것 켜기(로컬에서 이 옵션을 킨 채로 가동하면 오류남)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 이후 빌드 후 배포했을 때 정상 가동 되었음을 확인함.</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"추가\"><a href=\"#추가\" class=\"headerlink\" title=\"추가\"></a>추가</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--headless // 실제로 웹 창을 띄움. 페이지에 따라 돔을 못 읽어오기도 함. 우분투처럼 화면이 없는 OS에 배포할 때 이 옵션을 주석처리하면 DevPorts를 찾을 수 없다면서 오류가 떨어짐(송출할 수 있는 화면이 없기 때문)</span><br><span class=\"line\">--disable-gpu // gpu 비활성화 로컬 컴퓨터에서 이 옵션을 켜고 가동할 경우 커넥팅할수 없다는 오류가 나타남</span><br></pre></td></tr></table></figure>\n\n<p>골머리를 좀 많이 앓았는데 그냥 환경 옵션 추가로 해결되었다.</p>\n<p>ㅡㅡ;; 오류가 좀더 자세했으면 한다. 셀레늄이 문서화가 많이 안 되어있는 듯.</p>\n",
            "tags": [
                "cluster",
                "docker",
                "podman",
                "pm2",
                "ubuntu",
                "selenium",
                "chrome",
                "web_crawling",
                "문제해결",
                "이슈",
                "error"
            ]
        }
    ]
}